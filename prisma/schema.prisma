// This is your Prisma schema file
// Learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model PlayerProfiles {
  id                Int       @id @default(autoincrement())
  uuid              String    @unique
  userAccountUuid   String?   @map("user_account_uuid")
  name              String    @unique
  description       String? 
  avatar_url        String?   @map("avatar_url")
  frame_url         String?   @map("frame_url")
  level             Int
  exp               Int
  currentMana       Int       @map("current_mana")
  maxMana           Int       @map("max_mana")
  zeny              Int
  crystalShard      Int       @map("crystal_shard")
  createdAt         DateTime  @map("created_at")
  createdBy         String    @map("created_by")
  updatedAt         DateTime? @map("updated_at")
  updatedBy         String?   @map("updated_by")
  deletedAt         DateTime? @map("deleted_at")
  deletedBy         String?   @map("deleted_by")
  version           Int       

  // Relations
  costumes          Costumes[]

  @@map("player_profiles")
}

model AvatarBases {
  id               Int       @id @default(autoincrement())
  uuid             String    @unique
  imageUrl         String
  obtainsBaseUuid  String
  createdAt        DateTime  @default(now())
  createdBy        String?
  updatedAt        DateTime  @updatedAt
  updatedBy        String?
  deletedAt        DateTime?
  deletedBy        String?
  version          Int       

  // Relations
  obtainBase       ObtainBases @relation(fields: [obtainsBaseUuid], references: [uuid])

  @@map("avatar_bases")
}

model FrameBases {
  id               Int       @id @default(autoincrement())
  uuid             String    @unique
  imageUrl         String
  obtainsBaseUuid  String
  createdAt        DateTime  @default(now())
  createdBy        String?
  updatedAt        DateTime  @updatedAt
  updatedBy        String?
  deletedAt        DateTime?
  deletedBy        String?
  version          Int      

  // Relations
  obtainBase       ObtainBases @relation(fields: [obtainsBaseUuid], references: [uuid])

  @@map("frame_bases")
}

model CostumeBases {
  id              Int       @id @default(autoincrement())
  uuid            String    @unique
  equipmentId     String    @unique @map("equipment_id")
  name            String
  info            String?
  obtainsBaseUuid String?   @map("obtains_base_uuid")
  imagePath       String?   @map("image_path")
  prefabPath      String?   @map("prefab_path")
  equipType       Int       @map("equip_type")
  model           Int
  tier            Int
  isActive        Int       @map("is_active")
  isDefault       Int       @map("is_default")
  isColorable     Int       @map("is_colorable")
  colors          String?
  createdAt       DateTime  @map("created_at")
  createdBy       String    @map("created_by")
  updatedAt       DateTime? @map("updated_at")
  updatedBy       String?   @map("updated_by")
  deletedAt       DateTime? @map("deleted_at")
  deletedBy       String?   @map("deleted_by")
  version         Int       

  // Relations
  obtainBase      ObtainBases? @relation(fields: [obtainsBaseUuid], references: [uuid])
  costumes        Costumes[]

  @@map("costume_bases")
}

model Costumes {
  id              Int       @id @default(autoincrement())
  uuid            String    @unique
  playerUuid      String    @map("player_uuid")
  costumeBaseUuid String    @map("costume_base_uuid")
  currentColor    String?   @map("current_color")
  obtainDate      DateTime  @map("obtain_date")
  isFashion       Int       @map("is_fashion")
  isActive        Int       @map("is_active")
  isEquipped      Int       @map("is_equipped")
  createdAt       DateTime  @map("created_at")
  createdBy       String    @map("created_by")
  updatedAt       DateTime? @map("updated_at")
  updatedBy       String?   @map("updated_by")
  deletedAt       DateTime? @map("deleted_at")
  deletedBy       String?   @map("deleted_by")
  version         Int      

  // Relations
  player          PlayerProfiles @relation(fields: [playerUuid], references: [uuid])
  costumeBase     CostumeBases   @relation(fields: [costumeBaseUuid], references: [uuid])

  @@map("costumes")
}

model ObtainBases {
  id           Int       @id @default(autoincrement())
  uuid         String    @unique
  obtainsType  String?   @map("obtains_type")
  typesUuid    String?   @map("types_uuid")
  info         String?
  createdAt    DateTime  @map("created_at")
  createdBy    String    @map("created_by")
  updatedAt    DateTime? @map("updated_at")
  updatedBy    String?   @map("updated_by")
  deletedAt    DateTime? @map("deleted_at")
  deletedBy    String?   @map("deleted_by")
  version      Int       

  // Relations
  avatarBases   AvatarBases[]
  frameBases    FrameBases[]
  costumeBases  CostumeBases[]

  @@map("obtain_bases")
}

model Announcements {
  id           Int       @id @default(autoincrement())
  uuid         String    @unique
  info         String?
  image        String?
  createdAt    DateTime  @map("created_at")
  createdBy    String    @map("created_by")
  updatedAt    DateTime? @map("updated_at")
  updatedBy    String?   @map("updated_by")
  deletedAt    DateTime? @map("deleted_at")
  deletedBy    String?   @map("deleted_by")
  version      Int       

  @@map("announcements")
}

model TalentBases {
  id           Int       @id @default(autoincrement())
  uuid         String    @unique
  stage        Int
  type         String
  levelMax     Int       @map("level_max")
  stat         String    // 2, 0.10%, 5.00%
  skillPoint   Int       @map("skill_point")
  zenySpend    Int       @map("zeny_spend")  // 1000, 10000, 100000
  imageParth   String?   @map("image_parth") // มีการสะกดผิดจาก path เป็น parth ตามต้นฉบับ
  name         String
  detail       String?
  isActive     Int       @map("is_active")
  createdAt    DateTime  @map("created_at")
  createdBy    String    @map("created_by")
  updatedAt    DateTime? @map("updated_at")
  updatedBy    String?   @map("updated_by")
  deletedAt    DateTime? @map("deleted_at")
  deletedBy    String?   @map("deleted_by")
  version      Int       

  @@map("talent_bases")
}